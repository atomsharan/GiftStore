{% extends 'store/base.html' %}
{% load static %}

{% block title %}Product Details{% endblock %}

{% block extra_css %}
<link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<main class="main">
  <div class="section product-detail">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <!-- Product Image Gallery -->
          <div class="product-gallery">
            <img src="{% static 'assets/imgs/page/product/img-2.png' %}" alt="Product Image" class="img-fluid">
          </div>
        </div>
        <div class="col-lg-6">
          <!-- Product Information -->
          <div class="product-info">
            <h2 class="product-title">{{ product.name }}</h2>
            <div class="product-rating">
              <div class="rating">
                <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
                <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
                <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
                <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
                <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
              </div>
              <span class="reviews-count">(14 Reviews)</span>
            </div>
            <div class="product-price">
              <span class="current-price">${{ product.price }}</span>
              <span class="old-price">$45.00</span>
            </div>
            <div class="product-description">
              <p>{{ product.description }}</p>
            </div>
            
            <!-- Add to Cart Form -->
            <form action="{% url 'add_to_cart' product.id %}" method="post" class="cart-form">
              {% csrf_token %}
              <div class="quantity-selector mb-3">
                <button type="button" class="quantity-button minus">-</button>
                <input type="number" name="quantity" value="1" min="1" class="form-control quantity-input">
                <button type="button" class="quantity-button plus">+</button>
              </div>
              <button type="submit" class="btn btn-brand-1 btn-add-cart">Add to Cart</button>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Related Products Section -->
      <div class="related-products mt-5">
        <h3 class="section-title">Related Products</h3>
        <div class="row">
          {% for product in related_products %}
          <div class="col-lg-3 col-md-6">
            <div class="cardProduct cardProduct2">
              <div class="cardImage">
                <a href="{% url 'product_detail' product_id=product.id %}">
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
                </a>
                <div class="button-select">
                  <a href="{% url 'add_to_cart' product.id %}">Add to Cart</a>
                </div>
              </div>
              <div class="cardInfo">
                <a href="{% url 'product_detail' product_id=product.id %}">
                <h6 class="font-md-bold cardTitle">{{ product.name }}</h6>
                </a>
                <div class="product-info-bottom">
                  <p class="font-lg cardDesc">${{ product.price }}</p>
                  <div class="rating">
                    <img src="{% static 'assets/imgs/template/icons/star.svg' %}" alt="Rating">
                    <!-- More stars would go here -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}

{% block extra_js %}
<script src="{% static 'assets/js/main.js' %}"></script>
<script>
  // Quantity selector functionality
  document.addEventListener('DOMContentLoaded', function() {
    const minusBtn = document.querySelector('.quantity-button.minus');
    const plusBtn = document.querySelector('.quantity-button.plus');
    const quantityInput = document.querySelector('.quantity-input');
    
    minusBtn.addEventListener('click', function() {
      let value = parseInt(quantityInput.value);
      if (value > 1) {
        quantityInput.value = value - 1;
      }
    });
    
    plusBtn.addEventListener('click', function() {
      let value = parseInt(quantityInput.value);
      quantityInput.value = value + 1;
    });
  });
</script>
{% endblock %}